<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>iTunes Review Watcher | wtimme</title><meta name=keywords content><meta name=description content="Introduction In my sparetime I&rsquo;m creating a iOS application that focusses on customer reviews on Apple&rsquo;s App Store. It consists of the native app (written in Objective-C, as of now) and a REST server that gathers all the information from Apple&rsquo;s servers.
As much as I love happily coding away, I also appreciate our users' feedback. For iOS applications, a very common way of receiving feedback are the reviews on the iTunes Store."><meta name=author content><link rel=canonical href=https://wtimme.github.io/posts/2015-04-12-itunes-review-watcher/><link href=/assets/css/stylesheet.min.6fdf38588ea13f9fcfd31bf64487e300c670aec39f9ab8cf5473a494b8097993.css integrity="sha256-b984WI6hP5/P0xv2RIfjAMZwrsOfmrjPVHOklLgJeZM=" rel="preload stylesheet" as=style><link rel=icon href=https://wtimme.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wtimme.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wtimme.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://wtimme.github.io/apple-touch-icon.png><link rel=mask-icon href=https://wtimme.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.82.0"><meta property="og:title" content="iTunes Review Watcher"><meta property="og:description" content="Introduction In my sparetime I&rsquo;m creating a iOS application that focusses on customer reviews on Apple&rsquo;s App Store. It consists of the native app (written in Objective-C, as of now) and a REST server that gathers all the information from Apple&rsquo;s servers.
As much as I love happily coding away, I also appreciate our users' feedback. For iOS applications, a very common way of receiving feedback are the reviews on the iTunes Store."><meta property="og:type" content="article"><meta property="og:url" content="https://wtimme.github.io/posts/2015-04-12-itunes-review-watcher/"><meta property="article:published_time" content="2015-04-12T18:20:00+01:00"><meta property="article:modified_time" content="2015-04-12T18:20:00+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="iTunes Review Watcher"><meta name=twitter:description content="Introduction In my sparetime I&rsquo;m creating a iOS application that focusses on customer reviews on Apple&rsquo;s App Store. It consists of the native app (written in Objective-C, as of now) and a REST server that gathers all the information from Apple&rsquo;s servers.
As much as I love happily coding away, I also appreciate our users' feedback. For iOS applications, a very common way of receiving feedback are the reviews on the iTunes Store."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wtimme.github.io/posts/"},{"@type":"ListItem","position":2,"name":"iTunes Review Watcher","item":"https://wtimme.github.io/posts/2015-04-12-itunes-review-watcher/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"iTunes Review Watcher","name":"iTunes Review Watcher","description":"Introduction In my sparetime I\u0026amp;rsquo;m creating a iOS application that focusses on customer reviews on Apple\u0026amp;rsquo;s App Store. It consists of the native app (written in …","keywords":[],"articleBody":"Introduction In my sparetime I’m creating a iOS application that focusses on customer reviews on Apple’s App Store. It consists of the native app (written in Objective-C, as of now) and a REST server that gathers all the information from Apple’s servers.\nAs much as I love happily coding away, I also appreciate our users' feedback. For iOS applications, a very common way of receiving feedback are the reviews on the iTunes Store. Customers can vote a version of an application using a numerical rating (1 to 5 stars) and enter a text.\nThe official “iTunes Connect” app These reviews are not only visible on the App Store’s website or within Apple’s App Store app, but also from within iTunes Connect, the interface for managing everything related to the app (e. g. InApp purchases, the app’s description, etc.). Apple has also released a native iOS app which allows access to most (but not all) features of the web interface. When it comes to reading customer reviews, however, the native app falls a bit short:\n It’s only possible to read reviews from one store country at a time. Reading all reviews for an app is a painful process of hopping back and forth between the country list and the reviews. The native app has no support for push notifications whatsoever. Noticing new reviews is pure luck. I find customer feedback not only valuable but also incredible useful (sometimes), e. g. when there’s a bug that causes my application to crash. There’s little history for the reviews. Older ones disappear and it’s difficult to paint a broader image.  Product requirements These are my requirements of the project:\n Let users search for and follow apps (or other content) Query Apple’s server on a regular basis and cache the data, making it available infinitely Post push notifications for when a new review has been added or an older one was updated  Other features that might be added later:\n Sync the reviews with the device and make the review history available offline Keep track on the app’s ranking in the App Store charts (Further) Analyze and use the data gathered  Personal goals With this project, I plan on\n learning to work with NoSQL databases such as MongoDB learning to a RESTful web interface learning to work with the APNS (Apple Push Notification Service) developing a server application with a near infinite uptime (finally) releasing an application on the Apple App Store hopefully making the life of other people easier  First steps I started by researching ways to get the data from Apple.\nReviews via RSS The web interface of iTunes Connect allows the developer to subscribe to reviews using a RSS feed. For example, the most recent reviews for the official Facebook iOS application can be retrieved using this link. After playing with the parameters a bit I went ahead and created a simple node app that would download the XML and parse it into JSON objects:\n{ \"updatedDate\": \"2014-08-13T15:07:00.000Z\", \"entryId\": 1045982842, \"title\": \"Great game\", \"content\": \"Very cool game, good graphics, interesting gameplay\", \"rating\": 5, \"appVersion\": \"1.1.8\", \"authorName\": \"Иллжоаро\", \"trackId\": 564777203, \"rssFeedCountryCode\": \"us\", } Saving reviews to database For the next step, I began saving the reviews to a MySQL database. The JavaScript quickly got long and the queries were difficult to edit and maintain.\nAfter talking to co-workers and some research I decided to use MongoDB instead. Using the node package manager (NPM) registry I found mongoose, an object modeling module for node. In my opinion this makes for cleaner code, as the models can be easily created, searched and updated.\nRewriting the whole server In order to clean up the server project (everything was in one app.js file) I decided to rewrite it from scratch and splitting functionality into modules that I can require whenever I need.\nThe RESTful API As mentioned, the server provides the data using a RESTful interface. node has plenty of REST modules available and I settled for restify. That made it easy to implement the calls necessary for the app:\n GET /storeItems returns a list of all iTunes Store items in the server’s database GET /storeItems/:storeItemId/reviews returns a list of all reviews for a given iTunes Store item ID  Creating the basic iOS app With the server ready to scrape and serve reviews I went ahead and started developing the iOS app. It consists of two view controllers: The first one contains a list of all iTunes Store items saved in the database. The second one displays the list of reviews that the server has scraped. For the first iterations I don’t plan on winning any award with the UI, so the basic Cocoa Touch elements will do.\nCurrent status Having the list of reviews in the app is already quite a success for me. I’ve also added a basic iTunes Store search API and plan on adding management functionality (add/remove apps) to the iOS app.\nI would also like to release the source code to the server to the general public but haven’t decided yet just what I want to do with the application. As the app is not deployed on any server but my home computer it does not periodically check for updates to the reviews yet. This is also an issue that I would like to tackle rather soon, just to have some records to work with.\n","wordCount":"892","inLanguage":"en","datePublished":"2015-04-12T18:20:00+01:00","dateModified":"2015-04-12T18:20:00+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://wtimme.github.io/posts/2015-04-12-itunes-review-watcher/"},"publisher":{"@type":"Organization","name":"wtimme","logo":{"@type":"ImageObject","url":"https://wtimme.github.io/favicon.ico"}}}</script></head><body id=top><script>window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://wtimme.github.io/ accesskey=h title="wtimme (Alt + H)">wtimme</a>
<span class=logo-switches></span></div><ul id=menu onscroll=menu_on_scroll()><li><a href=https://wtimme.github.io/archives/ title=archive><span>archive</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>iTunes Review Watcher</h1><div class=post-meta>April 12, 2015</div></header><div class=post-content><h3 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h3><p>In my sparetime I&rsquo;m creating a iOS application that focusses on customer
reviews on <em>Apple</em>&rsquo;s App Store. It consists of the native app (written in
<em>Objective-C</em>, as of now) and a REST server that gathers all the information from
<em>Apple</em>&rsquo;s servers.</p><p>As much as I love happily coding away, I also appreciate our users' feedback.
For iOS applications, a very common way of receiving feedback are the reviews
on the <em>iTunes Store</em>. Customers can vote a version of an application using a
numerical rating (1 to 5 stars) and enter a text.</p><h3 id=the-official-itunes-connect-app>The official &ldquo;iTunes Connect&rdquo; app<a hidden class=anchor aria-hidden=true href=#the-official-itunes-connect-app>#</a></h3><p>These reviews are not only visible on the App Store&rsquo;s website or within <em>Apple</em>&rsquo;s
App Store app, but also from within <em>iTunes Connect</em>, the interface
for managing everything related to the app (e. g. InApp purchases, the app&rsquo;s
description, etc.). <em>Apple</em> has also released
<a href="https://itunes.apple.com/us/app/itunes-connect/id376771144?mt=8">a native iOS app</a>
which allows access to most (but not all) features of the web interface.
When it comes to reading customer reviews, however, the native app falls a bit
short:</p><ul><li>It&rsquo;s only possible to read reviews from <strong>one store country at a time</strong>. Reading all
reviews for an app is a painful process of hopping back and forth between the
country list and the reviews.</li><li>The native app has <strong>no support for push notifications</strong> whatsoever. Noticing
new reviews is pure luck. I find customer feedback not only valuable but also
incredible useful (sometimes), e. g. when there&rsquo;s a bug that causes my
application to crash.</li><li>There&rsquo;s <strong>little history for the reviews</strong>. Older ones disappear and it&rsquo;s
difficult to paint a broader image.</li></ul><p><img src=/itunes-connect-territory-list.png alt="Screenshot of the iTunes Connect app describing the territory list dilemma" title="This is one of my biggest issue with this app"></p><h3 id=product-requirements>Product requirements<a hidden class=anchor aria-hidden=true href=#product-requirements>#</a></h3><p>These are my requirements of the project:</p><ul><li>Let users search for and follow apps (or other content)</li><li>Query <em>Apple</em>&rsquo;s server on a regular basis and cache the data, making it
available infinitely</li><li>Post push notifications for when a new review has been added or an older one was
updated</li></ul><p>Other features that might be added later:</p><ul><li><strong>Sync</strong> the reviews with the device and make the review history available
offline</li><li><strong>Keep track</strong> on the app&rsquo;s ranking in the App Store charts</li><li><strong>(Further) Analyze</strong> and use the data gathered</li></ul><h3 id=personal-goals>Personal goals<a hidden class=anchor aria-hidden=true href=#personal-goals>#</a></h3><p>With this project, I plan on</p><ul><li>learning to work with <a href=https://en.wikipedia.org/wiki/NoSQL>NoSQL</a> databases
such as <a href=https://www.mongodb.org/>MongoDB</a></li><li>learning to a <a href=https://en.wikipedia.org/wiki/Representational_state_transfer>RESTful web interface</a></li><li>learning to work with the APNS (<em><a href=https://en.wikipedia.org/wiki/Apple_Push_Notification_Service>Apple Push Notification Service</a></em>)</li><li>developing a server application with a near infinite uptime</li><li>(finally) releasing an application on the <em>Apple App Store</em></li><li>hopefully making the life of other people easier</li></ul><h3 id=first-steps>First steps<a hidden class=anchor aria-hidden=true href=#first-steps>#</a></h3><p>I started by researching ways to get the data from <em>Apple</em>.</p><h4 id=reviews-via-rss>Reviews via RSS<a hidden class=anchor aria-hidden=true href=#reviews-via-rss>#</a></h4><p>The web interface of <em>iTunes Connect</em> allows the developer to subscribe to
reviews using <a href=https://en.wikipedia.org/wiki/RSS>a RSS feed</a>. For example,
the most recent reviews for the official <em>Facebook</em> iOS application
<a href="http://itunes.apple.com/rss/customerreviews/id=284882215/sortby=mostrecent/xml?cc=us">can be
retrieved using this link</a>.
After playing with the parameters a bit I went ahead and created a simple
<a href=https://nodejs.org/>node</a> app that would download the XML and parse it into
<a href=https://en.wikipedia.org/wiki/JSON>JSON</a> objects:</p><pre><code>{
    &quot;updatedDate&quot;: &quot;2014-08-13T15:07:00.000Z&quot;,
    &quot;entryId&quot;: 1045982842,
    &quot;title&quot;: &quot;Great game&quot;,
    &quot;content&quot;: &quot;Very cool game, good graphics, interesting gameplay&quot;,
    &quot;rating&quot;: 5,
    &quot;appVersion&quot;: &quot;1.1.8&quot;,
    &quot;authorName&quot;: &quot;Иллжоаро&quot;,
    &quot;trackId&quot;: 564777203,
    &quot;rssFeedCountryCode&quot;: &quot;us&quot;,
}
</code></pre><h4 id=saving-reviews-to-database>Saving reviews to database<a hidden class=anchor aria-hidden=true href=#saving-reviews-to-database>#</a></h4><p>For the next step, I began saving the reviews to
<a href=https://en.wikipedia.org/wiki/MySQL>a MySQL database</a>. The JavaScript quickly
got long and the queries were difficult to edit and maintain.</p><p>After talking to co-workers and some research I decided to use
<a href=https://www.mongodb.org/>MongoDB</a> instead. Using
<a href=https://www.npmjs.com/>the node package manager (NPM) registry</a> I found
<a href=http://mongoosejs.com/>mongoose</a>, an object modeling module for <em>node</em>. In my
opinion this makes for cleaner code, as the models can be easily created,
searched and updated.</p><h4 id=rewriting-the-whole-server>Rewriting the whole server<a hidden class=anchor aria-hidden=true href=#rewriting-the-whole-server>#</a></h4><p>In order to clean up the server project (everything was in one <em>app.js</em> file)
I decided to rewrite it from scratch and splitting functionality into modules
that I can <code>require</code> whenever I need.</p><h4 id=the-restful-api>The RESTful API<a hidden class=anchor aria-hidden=true href=#the-restful-api>#</a></h4><p>As mentioned, the server provides the data using a RESTful interface. <em>node</em> has
plenty of REST modules available and I settled for
<a href=http://mcavage.me/node-restify/>restify</a>. That made it easy to implement the
calls necessary for the app:</p><ul><li><code>GET /storeItems</code> returns a list of all <em>iTunes Store</em> items in
the server&rsquo;s database</li><li><code>GET /storeItems/:storeItemId/reviews</code> returns a list of all reviews for a given <em>iTunes Store</em> item ID</li></ul><h4 id=creating-the-basic-ios-app>Creating the basic iOS app<a hidden class=anchor aria-hidden=true href=#creating-the-basic-ios-app>#</a></h4><p>With the server ready to scrape and serve reviews I went ahead and started
developing the iOS app. It consists of two view controllers: The first one
contains a list of all <em>iTunes Store</em> items saved in the database. The second one
displays the list of reviews that the server has scraped. For the first
iterations I don&rsquo;t plan on winning any award with the UI, so the basic
<a href=https://en.wikipedia.org/wiki/Cocoa_Touch>Cocoa Touch</a> elements will do.</p><p><img src=/facebook-reviews.png alt="Screenshot of my app&rsquo;s interface" title="This is a first version of my app"></p><h3 id=current-status>Current status<a hidden class=anchor aria-hidden=true href=#current-status>#</a></h3><p>Having the list of reviews in the app is already quite a success for me.
I&rsquo;ve also added a basic <em>iTunes Store</em> search API and plan on adding management
functionality (add/remove apps) to the iOS app.</p><p>I would also like to release the source code to the server to the general
public but haven&rsquo;t decided yet just what I want to do with the application.
As the app is not deployed on any server but my home computer it does not
periodically check for updates to the reviews yet. This is also an issue
that I would like to tackle rather soon, just to have some records to work with.</p></div><footer class=post-footer></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://wtimme.github.io/>wtimme</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position"))},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})});var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft)}</script></body></html>